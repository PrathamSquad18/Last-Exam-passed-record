<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Exam Record Entry</title>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      background: #f7f8fb;
      padding: 15px;
      color: #222;
      margin: 0;
    }
    h2 {
      text-align: center;
      margin-bottom: 16px;
      font-size: 20px;
    }
    form {
      max-width: 600px;
      margin: 0 auto 20px auto;
      background: #fff;
      padding: 15px;
      border-radius: 6px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    label {
      display: block;
      margin-top: 10px;
      font-size: 14px;
    }
    input {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
      box-sizing: border-box;
    }
    button {
      margin-top: 14px;
      padding: 10px 16px;
      font-size: 15px;
      border: none;
      border-radius: 4px;
      background: #3498db;
      color: #fff;
      cursor: pointer;
      width: 100%;
    }
    button:hover {
      background: #2980b9;
    }
    .table-container {
      width: 100%;
      overflow-x: auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }
    th, td {
      border: 1px solid #e6e6e6;
      padding: 8px 6px;
      text-align: center;
      font-size: 14px;
      word-wrap: break-word;
    }
    th {
      background: #fafafa;
    }
    .status-success {
      color: green;
      font-weight: 600;
    }
    .status-fail {
      color: #c0392b;
      font-weight: 600;
    }
    .action-btn {
      padding: 4px 8px;
      font-size: 12px;
      margin: 2px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .edit-btn { background: #f1c40f; color: #fff; }
    .delete-btn { background: #e74c3c; color: #fff; }
    .edit-btn:hover { background: #d4ac0d; }
    .delete-btn:hover { background: #c0392b; }

    @media (max-width: 600px) {
      h2 { font-size: 18px; }
      label, input, button { font-size: 10px; }
      form { padding: 10px; }
      button { padding: 8px; }
      th, td { font-size: 8px; padding: 6px 4px; }
      .action-btn { font-size: 8px; padding: 3px 6px; }
    }
  </style>
</head>
<body>
  <h2>Enter Semester Examination Record</h2>
  <form id="examForm">
    <label>Semester:
      <input type="text" id="semester" placeholder="e.g. III" required>
    </label>
    <label>Month & Year of Passing:
      <input type="text" id="monthYear" placeholder="e.g. June 2024" required>
    </label>
    <label>Exam Seat No.:
      <input type="text" id="seatNo" placeholder="Enter seat number" required>
    </label>
    <label>Awarded Marks:
      <input type="number" id="awarded" min="0" required>
    </label>
    <label>Maximum Marks:
      <input type="number" id="maximum" min="1" required>
    </label>
    <button type="submit">Add Record</button>
  </form>

  <div class="table-container">
    <table id="recordsTable">
      <thead>
        <tr>
          <th>Semester</th>
          <th>Month & Year</th>
          <th>Seat No.</th>
          <th>Awarded</th>
          <th>Maximum</th>
          <th>%</th>
          <th>Remarks</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    const form = document.getElementById('examForm');
    const tbody = document.querySelector('#recordsTable tbody');
    let editIndex = null; // track which record is being edited

    // Load records from localStorage
    document.addEventListener("DOMContentLoaded", () => {
      let records = JSON.parse(localStorage.getItem("examRecords")) || [];
      records.forEach((r, index) => addRow(r, index));
    });

    form.addEventListener('submit', function(e){
      e.preventDefault();

      const semester = document.getElementById('semester').value;
      const monthYear = document.getElementById('monthYear').value;
      const seatNo = document.getElementById('seatNo').value;
      const awarded = parseFloat(document.getElementById('awarded').value);
      const maximum = parseFloat(document.getElementById('maximum').value);
      const percent = ((awarded/maximum)*100).toFixed(2);

      let record = { semester, monthYear, seatNo, awarded, maximum, percent };

      let records = JSON.parse(localStorage.getItem("examRecords")) || [];

      if (editIndex !== null) {
        records[editIndex] = record; // update
        editIndex = null;
      } else {
        records.push(record); // add new
      }

      localStorage.setItem("examRecords", JSON.stringify(records));
      renderTable();
      form.reset();
    });

    function addRow(record, index){
      const statusClass = (record.percent >= 40) ? "status-success" : "status-fail";
      const status = (record.percent >= 40) ? "Successful" : "Unsuccessful";

      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${record.semester}</td>
        <td>${record.monthYear}</td>
        <td>${record.seatNo}</td>
        <td>${record.awarded}</td>
        <td>${record.maximum}</td>
        <td>${record.percent}%</td>
        <td class="${statusClass}">${status}</td>
        <td>
          <button class="action-btn edit-btn" onclick="editRecord(${index})">Edit</button>
          <button class="action-btn delete-btn" onclick="deleteRecord(${index})">Delete</button>
        </td>
      `;
      tbody.appendChild(row);
    }

    function renderTable(){
      tbody.innerHTML = "";
      let records = JSON.parse(localStorage.getItem("examRecords")) || [];
      records.forEach((r, i) => addRow(r, i));
    }

    window.editRecord = function(index){
      let records = JSON.parse(localStorage.getItem("examRecords")) || [];
      let record = records[index];

      document.getElementById('semester').value = record.semester;
      document.getElementById('monthYear').value = record.monthYear;
      document.getElementById('seatNo').value = record.seatNo;
      document.getElementById('awarded').value = record.awarded;
      document.getElementById('maximum').value = record.maximum;

      editIndex = index;
    }

    window.deleteRecord = function(index){
      let records = JSON.parse(localStorage.getItem("examRecords")) || [];
      records.splice(index, 1);
      localStorage.setItem("examRecords", JSON.stringify(records));
      renderTable();
    }
  </script>
</body>
</html>
